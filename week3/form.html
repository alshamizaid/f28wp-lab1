<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="form.css">
  <title>User Registration Form</title>
  <style>
    .error {
      color: red;
    }

    .success {
      color: green;
    }
  </style>
</head>
<body>
  <h2>User Registration</h2>
  <form id="registrationForm">
    <div class="input-control">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" placeholder="Enter your username">
      <div class="error" id="usernameError"></div>
    </div>
    <div class="input-control">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" placeholder="Enter your email">
      <div class="error" id="emailError"></div>
    </div>
    <div class="input-control">
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" placeholder="Enter your password">
      <div class="error" id="passwordError"></div>
    </div>
    <div class="input-control">
      <label for="confirmPassword">Confirm Password:</label>
      <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password">
      <div class="error" id="confirmPasswordError"></div>
    </div>
    <button type="submit">Submit</button>
  </form>

  <script>
    const form = document.getElementById('registrationForm');
    const username = document.getElementById('username');
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirmPassword');

    const usernameError = document.getElementById('usernameError');
    const emailError = document.getElementById('emailError');
    const passwordError = document.getElementById('passwordError');
    const confirmPasswordError = document.getElementById('confirmPasswordError');

    form.addEventListener('submit', function(event) {
      if (!isUsernameValid() || !isEmailValid() || !isPasswordValid() || !isConfirmPasswordValid()) {
        event.preventDefault();
      }
    });

    username.addEventListener('blur', isUsernameValid);
    email.addEventListener('blur', isEmailValid);
    password.addEventListener('blur', isPasswordValid);
    confirmPassword.addEventListener('blur', isConfirmPasswordValid);

    function isUsernameValid() {
      if (username.value.trim() === '') {
        usernameError.textContent = 'Username cannot be empty';
        usernameError.classList.add('error');
        usernameError.classList.remove('success');
        return false;
      } else {
        usernameError.textContent = 'Username is valid';
        usernameError.classList.remove('error');
        usernameError.classList.add('success');
        return true;
      }
    }

    function isEmailValid() {
      const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
      if (email.value.trim() === '') {
        emailError.textContent = 'Email cannot be empty';
        emailError.classList.add('error');
        emailError.classList.remove('success');
        return false;
      } else if (!emailPattern.test(email.value)) {
        emailError.textContent = 'Invalid email format';
        emailError.classList.add('error');
        emailError.classList.remove('success');
        return false;
      } else {
        emailError.textContent = 'Email is valid';
        emailError.classList.remove('error');
        emailError.classList.add('success');
        return true;
      }
    }

    function isPasswordValid() {
      if (password.value.trim() === '') {
        passwordError.textContent = 'Password cannot be empty';
        passwordError.classList.add('error');
        passwordError.classList.remove('success');
        return false;
      } else if (password.value.length < 8) {
        passwordError.textContent = 'Password must be at least 8 characters';
        passwordError.classList.add('error');
        passwordError.classList.remove('success');
        return false;
      } else {
        passwordError.textContent = 'Password is valid';
        passwordError.classList.remove('error');
        passwordError.classList.add('success');
        return true;
      }
    }

    function isConfirmPasswordValid() {
      if (confirmPassword.value.trim() === '') {
        confirmPasswordError.textContent = 'Confirm Password cannot be empty';
        confirmPasswordError.classList.add('error');
        confirmPasswordError.classList.remove('success');
        return false;
      } else if (confirmPassword.value !== password.value) {
        confirmPasswordError.textContent = 'Passwords do not match';
        confirmPasswordError.classList.add('error');
        confirmPasswordError.classList.remove('success');
        return false;
      } else {
        confirmPasswordError.textContent = 'Passwords match';
        confirmPasswordError.classList.remove('error');
        confirmPasswordError.classList.add('success');
        return true;
      }
    }
  </script>
</body>
</html>
